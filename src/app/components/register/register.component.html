<div class="w-30 text-center mx-auto">
  <div class="d-flex gap-4 align-items-baseline">
    <mat-icon class="fs-3" btn (click)="location.back()">arrow_back</mat-icon>
    <h1>Register new {{accountService.isAdmin()?"Administrator":"User"}}</h1>
  </div>
  <hr>
  <div>
    <form class="d-flex flex-column  gap-2" [formGroup]="creationForm" (ngSubmit)="register()">

      <mat-form-field appearance="outline">
        <mat-label>Name</mat-label>
        <input formControlName="name" matInput>
        @if(validator.isError('name'))
        {
        <mat-error> {{validator.validate('name','Name','must start with uppercase leter')}}</mat-error>
        }
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Surname</mat-label>
        <input formControlName="surname" matInput>
        @if(validator.isError('surname'))
        {
        <mat-error> {{validator.validate('surname','Surname','must start with uppercase leter')}}</mat-error>
        }
      </mat-form-field>


      <mat-form-field appearance="outline">
        <mat-label>Email</mat-label>
        <input formControlName="email" matInput>
        @if(validator.isError('email'))
        {
        <mat-error> {{validator.validate('email','Email')}}</mat-error>
        }
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Password</mat-label>
        <input type="password" formControlName="password" matInput>
        @if(validator.isError('password'))
        {
        <mat-error> {{validator.validate('password','Password','incorect')}}</mat-error>
        }
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Сonfirmation password</mat-label>
        <input type="password" formControlName="confirmPassword" matInput>
        @if(validator.isError('confirmPassword'))
        {
        <mat-error> {{validator.validate('confirmPassword','Сonfirmation password','and password do not match')}}</mat-error>
        }
      </mat-form-field>
      <div class="d-flex gap-3">
        <mat-form-field class="flex-fill" appearance="outline">
          <mat-label>Phone number</mat-label>
          <input type="tel" formControlName="phoneNumber" matInput>
          @if(validator.isError('phoneNumber'))
          {
          <mat-error> {{validator.validate('phoneNumber','','(xxx-xxx-xx-xx) (xxx xxx xx xx) (xxx xxx xxxx) (xxx-xxx-xxxx)')}}</mat-error>
          }
        </mat-form-field>
        <mat-form-field class="flex-fill" appearance="outline">
          <mat-label>Birthdate</mat-label>
          <input formControlName="birthdate" [max]="today" matInput [matDatepicker]="datepicker">
          <mat-datepicker-toggle matIconSuffix [for]="datepicker"></mat-datepicker-toggle>
          <mat-datepicker #datepicker>
            <mat-datepicker-actions>
              <button mat-button matDatepickerCancel>Cancel</button>
              <button mat-raised-button color="primary" matDatepickerApply>Apply</button>
            </mat-datepicker-actions>
          </mat-datepicker>
          @if(validator.isError('birthdate'))
          {
          <mat-error> {{validator.validate('birthdate','Birthdate')}}</mat-error>
          }
        </mat-form-field>
      </div>

      <button type="submit" class="flex-fill" mat-raised-button color="primary">Register</button>
      @if(!accountService.isAdmin()){
      <button type="button" class="flex-fill" routerLink="/login" mat-raised-button>Login</button>
      }

    </form>
  </div>
</div>
